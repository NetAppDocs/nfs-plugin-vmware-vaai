<!DOCTYPE html>
<html lang="en">
  <head class="at-element-marker">
  <title>Install NetApp NFS Plug-in for VMware VAAI</title>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge,chrome=1">
  <meta http-equiv="language" content="en">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta property="og:title" content="Install NetApp NFS Plug-in for VMware VAAI" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
	<meta property="og:description" content="Installing the NFS Plug-in involves enabling VMware vStorage for NFS on the NetApp storage system, verifying that VAAI (VMware vStorage APIs for Array Integr..." />
  <meta property="og:image" content="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/images/logo-tophat-social.png" />
  <meta property="og:image:alt" content="NetApp Logo" />
  <meta name="format-detection" content="telephone=no">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="encoding" content="utf-8">
  <meta http-equiv="nss-type" content="Product Documentation"/>
  <meta http-equiv="nss-subtype" content="User Guide"/><meta name="description" content="Installing the NFS Plug-in involves enabling VMware vStorage for NFS on the NetApp storage system, verifying that VAAI (VMware vStorage APIs for Array Integr...">
  <meta name="keywords" content=" install, netapp, nfs, plug-in, vmware, vaai, involve, enable, netapp, vstorage, api, array, integration, installation, download, nfsv4.1"><!-- Icons -->
  <link rel="icon" href="/us-en/nfs-plugin-vmware-vaai/images/favicon.ico" type="image/x-icon">

  <!-- RSS Feed --><!-- CSS Definitions: NetApp CSS should be defined after generic css -->


  <!-- Combined CSS -->
  <link rel="stylesheet" type="text/css" href="/us-en/nfs-plugin-vmware-vaai/css/ie-netappdocs.css">

  
  <link rel="stylesheet" href="/us-en/nfs-plugin-vmware-vaai/css/ie-landing-page.css" type="text/css">
  <link rel="stylesheet" href="/us-en/nfs-plugin-vmware-vaai/css/ie-tabbed-blocks.css" type="text/css">
  <!-- Canonical url -->
  <link rel="canonical" href="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="x-default" href="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="en" href="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="ja" href="https://docs.netapp.com/ja-jp/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="ko" href="https://docs.netapp.com/ko-kr/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="zh-Hans" href="https://docs.netapp.com/zh-cn/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="zh-Hant" href="https://docs.netapp.com/zh-tw/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="de" href="https://docs.netapp.com/de-de/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="es" href="https://docs.netapp.com/es-es/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="fr" href="https://docs.netapp.com/fr-fr/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <link rel="alternate" hreflang="it" href="https://docs.netapp.com/it-it/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html" />
  <!-- Top level site integrations -->
<script type="text/javascript" src="https://cdn.cookielaw.org/consent/72570c5c-fe30-465f-b0e0-b77f7fb4ae34/OtAutoBlock.js"></script>
    <script type="text/javascript" src="https://cdn.cookielaw.org/scripttemplates/otSDKStub.js" charset="UTF-8" data-document-language="true" data-domain-script="72570c5c-fe30-465f-b0e0-b77f7fb4ae34"></script>
    <script type="text/javascript">function OptanonWrapper() { }</script>
    <script type="text/plain" class="optanon-category-C0002" src="https://assets.adobedtm.com/60287eadf1ee/c284da483c83/launch-e9ff3acac59f.min.js"></script>
    <script class="optanon-category-C0001">(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
        j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.setAttributeNode(d.createAttribute('data-ot-ignore'));j.setAttribute('class','optanon-category-C0001');j.async=true;
        j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl+'';f.parentNode.insertBefore(j,f);
        })(window,document,'script','dataLayer','GTM-MD73T9M');</script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  
  <script>
    $(document).ready(function() {
      const MASTHEAD_OFFSET = 65;
      const SECTIONS = $("main h2, main h3");
      // PAGE NAV - Init
      if (SECTIONS.length == 0) {
        // remove if there is no elements
        /*
        $("#ie-right-navbar").remove();
        $("#ie-right-navbar-collapse").remove();
        */
      } else {
        $(".page-nav-title").css('display', 'block');
        for (var i = 0; i < SECTIONS.length; i++) {
          var sectionId = $(SECTIONS[i]).attr('id');
          var sectionName = $(SECTIONS[i]).text();
          var subClass = $(SECTIONS[i]).is("h3") ? ' page-nav__sublink' : '';
          $("#page-menu").append('<li class="page-nav-item"><a href="#' + sectionId + '" class="page-nav__link' + subClass + '">' + sectionName + '</a></li>');
        }
      }
    });
  </script>
  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>

  <!-- Used for Product Family Page Sidebar Visibility --><!-- Used to import Promise for IE. Required for SearchKit -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script><script src='/us-en/nfs-plugin-vmware-vaai/js/na-search.js'></script><script src='/us-en/nfs-plugin-vmware-vaai/js/ie-clouddocs.js'></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><script>
    /*
      $(document).ready(function() {
          $("#tg-sb-link").click(function() {
              $("#tg-sb-sidebar").toggle();
              $("#tg-sb-content").toggleClass('col-md-9');
              $("#tg-sb-content").toggleClass('col-md-12');
              $("#tg-sb-icon").toggleClass('fa-toggle-on');
              $("#tg-sb-icon").toggleClass('fa-toggle-off');
          });
      });
      */
  </script>
  <script src='/us-en/nfs-plugin-vmware-vaai/js/custom-dropdown.js'></script>
  <script src='/us-en/nfs-plugin-vmware-vaai/js/FileSaver.min.js'></script>
  <script src='/us-en/nfs-plugin-vmware-vaai/js/jszip-utils.min.js'></script>
  <script src='/us-en/nfs-plugin-vmware-vaai/js/jszip.min.js'></script><script src='/us-en/nfs-plugin-vmware-vaai/js/ie-pdf-ux.js'></script></head>


  <body class role="document" data-flavor="">
    <div class="skip-to-main">
      <a href="#main" >Skip to main content</a>
    </div><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MD73T9M"
      height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript><div id="page" class="">
      <div id="ie-phone-menu" class=""></div>
      <div id="ie-content-wrap" class="">
        <nav id="ie-new-header">
    <ul>
        <li id="ie-phone-menu-button">
            <a href="#">
                <image id="" src="/us-en/nfs-plugin-vmware-vaai/images/hamburger.svg" alt="menu" />
            </a>
        </li>

        <li>
            <a href="https://www.netapp.com/">
                <image id="ie-header-logo" src="/us-en/nfs-plugin-vmware-vaai/images/netapp_logo.svg" alt="netapp" />
            </a>
        </li>
        <li id="ie-header-docs">
            <a href="https://www.netapp.com/support-and-training/documentation/">Docs</a>
        </li>

        <!-- Empty container to push header left with or without lang selector -->
        <li id="empty-container" style="margin-left: auto">
        </li>
        <!-- Start Language Selector --><li id="ie-language-dropdown">
            <div id="language-dropdown" class="custom-dropdown custom-dropdown-lang">
                <div class="custom-dropdown-select custom-dropdown-select-lang">
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/language_white_24dp.svg" class="n-globe__icon" />
                    <span class="lang-name">English</span>
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown header invisible" />
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup header" />
                    </button>
                </div>

                <ul class="custom-dropdown-menu"><li>
                        <a href="https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">English</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/ja-jp/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">日本語</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/ko-kr/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">한국어</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/zh-cn/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">简体中文</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/zh-tw/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">繁體中文</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/de-de/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">Deutsch</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/es-es/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">Español</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/fr-fr/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">Français</span></a>
                    </li><li>
                        <a href="https://docs.netapp.com/it-it/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html"
                            target="_self"><span translate="no" class="notranslate">Italiano</span></a>
                    </li></ul>
            </div>
            </li>
        <!-- End Language Selector -->


        <li id="ie-allnetapp">
            <div id="allnetapp-dropdown" class="custom-dropdown custom-dropdown-allnetapp">
                <div class="custom-dropdown-select custom-dropdown-select-allnetapp">
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/apps_white_24dp.svg" alt="" class="allnetapp-icon" />
                    <span class="allnetapp-name">All NetApp</span>
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown header invisible" />
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup header" />
                    </button>
                </div>

                <ul class="custom-dropdown-menu allnetapp-dropdown">
                    <li>
                        <a href="https://bluexp.netapp.com/"
                            target="_self"><span translate="no" class="notranslate">BlueXP</span></a>
                    </li>
                    <li>
                        <a href="https://mysupport.netapp.com/site/"
                            target="_self"><span translate="no" class="notranslate">Support</span></a>
                    </li>
                    <li>
                        <a href="https://kb.netapp.com/"
                            target="_self"><span translate="no" class="notranslate">Knowledge Base</span></a>
                    </li>
                    <li>
                        <a href="https://www.netapp.com/support-and-training/netapp-learning-services/"
                            target="_self"><span translate="no" class="notranslate">Training</span></a>
                    </li>
                </ul>
            </div>

        </li>

    </ul>
</nav>

        <main id="n-main-content" class="n-main-content">
          <!-- Start Documentation Content -->
<div class="ie-main">

<div id="ie-new-sidebar-collapse" style="display: none">
    <img id="sidebar-expand" class="ie-searchbox-icon" src="/us-en/nfs-plugin-vmware-vaai/images/double_arrow.svg" alt="" />
</div>
<div id="ie-new-sidebar">
    <div id="ie-product-identity-lockup">
        <div id="sidebar-collapse" class="">
            <img src="/us-en/nfs-plugin-vmware-vaai/images/double_arrow.svg" alt="" />
        </div>
        <div id="ie-breadcrumb" class="">
  <ul class="ie-breadcrumb">
    <li class="">
      <a href="https://docs.netapp.com">All docs</a>
    </li>
    
    

    
  </ul>
  
  <div class="ie-product-name" >
    <!--<a href="/us-en/nfs-plugin-vmware-vaai/">-->
      NetApp NFS Plug-in for VMware VAAI
    <!--</a>-->
  </div>
</div>

            

        
        

<div id="ie-searchbox" class="ie-searchbox-sidebar ">
    <img class="ie-searchbox-icon" src="/us-en/nfs-plugin-vmware-vaai/images/loupe.svg" alt=""/>
    <div id="react-search" 
        data-search-html="/us-en/nfs-plugin-vmware-vaai/search.html" 
        data-type="widget"
        data-placeholder="Search documentation"
        data-no-results-found="No results were found for {query}"
        data-did-you-mean="Search for {suggestion}."
        data-no-results-found-did-you-mean="No results found for {query}. Did you mean {suggestion}?"
        data-results-found="{hitCount} results found"
        data-error-message="An error occurred. Please try again."
        data-error-reset="Reset search"
        data-sk-es-pf-indexes="" 
        data-flavor="">
    </div>
</div>
        
    </div>
    <div id="ie-new-toc"><script>
  let sidebarAccordion = true;

  /* specific css rules for Mac */
  if(navigator.platform.match('Mac') !== null) {
    document.body.setAttribute('class', 'OSX');
  }

</script>

<div id="ie-sidebar-container">
  <ul id="ie-sidebar-list" ><li 
      data-pdf-exists="true" 
      data-pdf-filename="NetApp NFS Plug-in for VMware VAAI docs"
      data-li-level="1#" 
      class="   "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="/index.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/nfs-plugin-vmware-vaai/index.html">
        NetApp NFS Plug-in for VMware VAAI docs
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Release Notes"
      data-li-level="1#" 
      class="   "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="/releasenotes.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/nfs-plugin-vmware-vaai/releasenotes.html">
        Release Notes
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Install and configure"
      data-li-level="1" 
      class=" sidebar-folder    "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="" 
    ><a class="ie-sidebar-menuitem-1  ie-sidebar-button " href="#">
        <img class="ie-sidebar-icon ie-sidebar-button open" src="/us-en/nfs-plugin-vmware-vaai/images/link_expand.svg" alt="" />
        <img class="ie-sidebar-icon ie-sidebar-button close" src="/us-en/nfs-plugin-vmware-vaai/images/link_collapse.svg" alt="" />
        <!--<div class="" style="display: inline;"> Install and configure</div>-->
         Install and configure
      </a>
      <ul class="">
        <li 
      data-pdf-exists="true" 
      data-pdf-filename="Install NetApp NFS Plug-in for VMware VAAI"
      data-li-level="2#" 
      class="  ie-sidebar-selected    "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
    ><a class="ie-sidebar-menuitem-2 " href="/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html">
        Install NetApp NFS Plug-in for VMware VAAI
      </a></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Configure export policies for ONTAP to allow VAAI over NFS"
      data-li-level="2#" 
      class="   "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="/task-configure-export-policies-for-clustered-data-ontap-to-allow-vaai-over-nfs.html" 
    ><a class="ie-sidebar-menuitem-2 " href="/us-en/nfs-plugin-vmware-vaai/task-configure-export-policies-for-clustered-data-ontap-to-allow-vaai-over-nfs.html">
        Configure export policies for ONTAP to allow VAAI over NFS
      </a></li></ul></li><li 
      data-pdf-exists="true" 
      data-pdf-filename="Legal Notices"
      data-li-level="1#" 
      class="   "
      dale-page-url="/task-install-netapp-nfs-plugin-for-vmware-vaai.html" 
      dale-entry-url="/reference-legal-notices.html" 
    ><a class="ie-sidebar-menuitem-1 " href="/us-en/nfs-plugin-vmware-vaai/reference-legal-notices.html">
        Legal Notices
      </a></li></ul>
</div>
<script>

  $(".ie-sidebar-button").click(function (e) {
    e.preventDefault();
    e.stopPropagation();

    expandedLI = $('li.ie-sidebar-expand')

    const li = $(this).closest("li");

    const parentsLI = $(li).parents('li');

    expandedLI.map(element => {
      if (sidebarAccordion && !li.hasClass('ie-sidebar-expand') && jQuery.inArray(expandedLI[element], parentsLI) == -1) {
        $(expandedLI[element]).toggleClass('ie-sidebar-expand');
        $(expandedLI[element]).children("ul").animate({ height: 'toggle' }, 400, function () {
          $(li).children("ul").toggleClass('ie-sidebar-open');

        })
      }

    })

    $(li).toggleClass('ie-sidebar-expand');
    $(li).children("ul").animate({ height: 'toggle' }, 400, function () {
      $(li).children("ul").toggleClass('ie-sidebar-open');
    })
  });


  
    $("li.ie-sidebar-selected").parents('ul').toggleClass("ie-sidebar-open");
    $("li.ie-sidebar-selected").toggleClass("ie-sidebar-expand")
    $("ul.ie-sidebar-open").parent().toggleClass("ie-sidebar-expand");
    $("li.ie-sidebar-selected").children('ul').toggleClass("ie-sidebar-open")
  
  
</script>
    </div>
</div>
<script>

    
    let sidebarScrollTopPosition = 0;
    $("#ie-new-toc").on("scroll", function () {
        if (sidebarScrollTopPosition == 0) {
            $.cookie("sidebarScroll", $("#ie-new-toc").scrollTop(), {
                path: "/us-en/nfs-plugin-vmware-vaai"
            });
        }

        if ($("#ie-new-toc").scrollTop() > 0) {
            $('#ie-product-identity-lockup').addClass('ie-addShadow');
        } else {
            $('#ie-product-identity-lockup').removeClass('ie-addShadow');
        }
    });

    $(function () {
        if ($.cookie("sidebarScroll")) {
            $("#ie-new-toc").scrollTop($.cookie("sidebarScroll"));
        }
    });

    function setSidebarBottom() {
        const footerGap = PXinViewport($(".n-footer"));
        document.getElementById("ie-new-sidebar").style.bottom = Math.max(0, footerGap) + "px";
    }

    window.onscroll = () => {
        setSidebarBottom();
    };

    $("#sidebar-collapse").click(function (e) {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        e.preventDefault();
        const width = $(".ie-content-pane").width();
        const marginLeft = parseInt($(".ie-content-pane").css('marginLeft'));

        if ($.cookie("sidebarScroll")) {
            sidebarScrollTopPosition = $.cookie("sidebarScroll");
        }

        $("#ie-new-sidebar").animate({ width: 'toggle' }, 350, function () {
            $("#ie-new-sidebar-collapse").show();
            $("#ie-new-sidebar").removeClass("open")
            $("#ie-new-sidebar").addClass("close")
            $("#ie-new-sidebar").removeAttr("style")
        });
        $(".ie-content-pane").animate({ width: (width + sidebarWidth), marginLeft: (marginLeft - sidebarWidth) }, 350, function () {
            resizeContent()
        })

    });
    $("#sidebar-expand").click(function (e) {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        e.preventDefault();
        const width = $(".ie-content-pane").width();
        const marginLeft = parseInt($(".ie-content-pane").css('marginLeft'));

        $("#ie-new-sidebar").animate({ width: 'toggle' }, 250, function () {
            $('#ie-new-sidebar').css('display', 'flex');
            $("#ie-new-sidebar-collapse").hide();
            $("#ie-new-sidebar").removeClass("close")
            $("#ie-new-sidebar").addClass("open")
            setSidebarBottom();

            if (sidebarScrollTopPosition != 0) {
                $.cookie("sidebarScroll", sidebarScrollTopPosition, {
                    path: "/us-en/nfs-plugin-vmware-vaai"
                })
                $("#ie-new-toc").scrollTop(sidebarScrollTopPosition);
                sidebarScrollTopPosition = 0;
            }
        });
        $(".ie-content-pane").animate({ width: (width - sidebarWidth), 'marginLeft': (marginLeft + sidebarWidth) }, 250, function () {
            resizeContent()
        })
    });
    function resizeContent() {
        const sidebarWidth = $("#ie-new-sidebar").width() - $("#ie-new-sidebar-collapse").width();
        const rightNavbarVisible =  $("#ie-right-navbar").css('display') && $("#ie-right-navbar").css('display') != 'none';
        const sidebarVisible = $("#ie-new-sidebar").css('display') != 'none';
        const rightNavbarWidth = $("#ie-right-navbar").width();
        const rightNavbarCollapseWidth = $("#ie-right-navbar-collapse").width();
        const rightNavbarCollapseVisible = $("#ie-right-navbar-collapse").css('display') && $("#ie-right-navbar-collapse").css('display') != 'none';
        
        if (rightNavbarVisible && sidebarVisible) {
            $(".ie-content-pane").width(`calc(100% - ${sidebarWidth + rightNavbarWidth}px)`)
            $(".ie-content-pane").css('marginLeft', `${sidebarWidth}px`)
        } else if (sidebarVisible) {
            $(".ie-content-pane").css('marginLeft', `${sidebarWidth}px`)
            if (rightNavbarCollapseVisible) {
                $(".ie-content-pane").width(`calc(100% - ${sidebarWidth + rightNavbarCollapseWidth}px)`)
            } else {
                $(".ie-content-pane").width(`calc(100% - ${$("#ie-new-sidebar").width()}px)`)
            }

        } else if (rightNavbarVisible) {
            $(".ie-content-pane").css('marginLeft', `${$("#ie-new-sidebar-collapse").width()}px`)
            $(".ie-content-pane").width(`calc(100% - ${rightNavbarWidth}px)`)
        } else {
            $(".ie-content-pane").css('marginLeft', `${$("#ie-new-sidebar-collapse").width()}px`)
            if (rightNavbarCollapseVisible) {
                $(".ie-content-pane").width(`calc(100% - ${rightNavbarCollapseWidth}px)`);
            } else {
                $(".ie-content-pane").width(`calc(100% - ${$("#ie-new-sidebar-collapse").width()}px) `);
            }
            
        }
    }
    $(window).on("resize load", function () {
        setSidebarBottom();
        resizeContent()
    });


</script>

<div class="ie-content-pane ie-component-detail-content ie-component-detail-content--show-code">
    <!-- Begin of page container --><article class="page-content" id="main">
      <!-- include utility.html -->
      <div class="ie-component-detail-heading-wrap">
  <h1 class="ie-component-detail-heading">Install NetApp NFS Plug-in for VMware VAAI</h1>
</div>

<div id="ie-byline">
  
<div class="page-details">
    
        
            <time datetime="2023-01-13 15:49:12 +0000">01/13/2023</time>
        
    
    
        <span>Contributors
            <a target="_blank" class="ext-link-indicator" href="https://github.com/netapp-aoife"><img  class="avatar avatar-small" alt="netapp-aoife" width="20" height="20" src="https://avatars.githubusercontent.com/u/92876203?v=4" style="border-radius: 50%;"/></a>
        
        </span>
    
    
</div>
<div class="page-controls">
    <div id="contribute-dropdown" class="custom-dropdown custom-dropdown-contrib" >
        <div class="custom-dropdown-select custom-dropdown-select-contrib">
        <span class="contrib-name"><img src="/us-en/nfs-plugin-vmware-vaai/images/discuss-sm.svg" alt="" class="github-icon" />Suggest changes</span>
        <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevrondown invisible" />
        <img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" alt="" class="custom-icon chevronup" />
        </div>
        <ul class="custom-dropdown-menu suggested-changes-dropdown"><li>
                <a target="_blank" href="https://github.com/NetAppDocs/nfs-plugin-vmware-vaai/issues/new?template=new-from-page.yml&page-url=https://docs.netapp.com/us-en/nfs-plugin-vmware-vaai/task-install-netapp-nfs-plugin-for-vmware-vaai.html&page-title=Install NetApp NFS Plug-in for VMware VAAI" class="page-nav-contribute-link" role="button">Request doc changes</a>
            </li><li> 
                <a target="_blank" href="https://github.com/NetAppDocs/nfs-plugin-vmware-vaai/blob/main/task-install-netapp-nfs-plugin-for-vmware-vaai.adoc" class="page-nav-contribute-link" role="button">Edit this page</a>
            </li><li><a target="_blank" href="https://docs.netapp.com/us-en/contribute/" class="page-nav-contribute-link"  >Learn how to contribute</a></li>
        </ul>
    </div>
    <div id="pdf-control-container">
        <div class="n-pdf-header">
            <a id="toggleButtonPdf" class="n-pdf-button" type="button">
                <img class="adobe-icon" src="/us-en/nfs-plugin-vmware-vaai/images/pdf-icon.png" alt="" width="16" height="16"/>PDFs<img src="/us-en/nfs-plugin-vmware-vaai/images/dropdown-arrow.svg" class="custom-icon" alt="" />
            </a>
        </div>
        <div class="n-pdf-body-container">
            <ul id="toggleContainerPdf" class="n-pdf-body" style="display:none;"><li class="pdf-ux-container">
                    
                    
                    
                    <a target="_blank" class="pdf-download-link" href="/us-en/nfs-plugin-vmware-vaai/pdfs/fullsite-sidebar/NetApp_NFS_Plug_in_for_VMware_VAAI_Documentation.pdf" >
                    <img src="/us-en/nfs-plugin-vmware-vaai/images/pdf-icon.png" alt="" width="16" height="16"/>PDF of this doc site</a>





    
      <ul class="subfolders" style="display:none;">
        <li class="pdf-ux-container">
          
          
          
          <a target="_blank" class="pdf-download-link"
            
              href="/us-en/nfs-plugin-vmware-vaai/pdfs/sidebar/Install_and_configure.pdf" 
            
          >
            <img src="/us-en/nfs-plugin-vmware-vaai/images/pdf-icon.png" alt="" width="16" height="16"/>
            Install and configure
          </a>
          
    <ul class="subfolders" id="pdf-remove" style="display:none;"><li class="active"></li></ul>
  




        </li>
      </ul>
    

  



</li></ul>
            <div class="zip-pdf-link-container" style="display: none;">   
                <a href="#" id="zipPdf">
                <img src="/us-en/nfs-plugin-vmware-vaai/images/pdf-zip.png" alt="" width="16" height="16"/>
                <pre>Collection of separate PDF docs<span class="zip-size"></span></pre>
                </a><div id="zip-link-popup" class="hide">
    <div class="inner-modal">
        <div class="downloading-progress">
            <div class="spinner"></div>
            <h1>Creating your file...</h1>
            <div>This may take a few minutes. Thanks for your patience.</div>
            <button class="cancel-download-btn" type="button">Cancel</button>
        </div>
        <div class="download-complete hide">
            <div class="done-icon">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M20.285 2l-11.285 11.567-5.286-5.011-3.714 3.716 9 8.728 15-15.285z"/></svg>
            </div>
            <div>Your file is ready</div>
            <button class="cancel-download-btn" type="button">OK</button>
        </div>
    </div>
</div>
<script>
    $(".cancel-download-btn").click(function(){
        $("#zip-link-popup").addClass("hide");
        $("#zip-link-popup .downloading-progress").removeClass("hide");
        $("#zip-link-popup .download-complete").addClass("hide");
    });
</script></div>
        </div>
    </div>        
<script>
$("#toggleContainerPdf li.active:last-child").parents('ul.subfolders').toggle('display');
$("#toggleButtonPdf").on('click', function(e){ 
    e.stopPropagation();
    $("#toggleContainerPdf").toggle('display');
    $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
});

//hide is by clicking outside pdfcontainer
$(document).on('click', function (e) {
    if ($('#toggleContainerPdf').is(':visible') && !$('.n-pdf-body-container').is(e.target) && !$('.n-pdf-body-container').has(e.target).length)  {
        
        $("#toggleContainerPdf").toggle('display');
        $(".n-pdf-body-container .zip-pdf-link-container").toggle('display');
        $("#toggleButtonPdf").removeClass("active");
    }
});
</script>
<script>
    function getPdfLocation() {
        const pdfLocation = window.scrollX + document.querySelector('#pdf-control-container').getBoundingClientRect().left
        if (pdfLocation < 450) {
            $(".n-pdf-body-container").addClass("block")
        } else {
            $(".n-pdf-body-container").removeClass("block")
        }
    
    }
    $( window ).on( "resize", function() {
        getPdfLocation()
} );
</script>
<script>
    const pdfButtonWidth =  $(".n-pdf-header").width();
    const pdfMenuWidth = $(".n-pdf-body-container").width();
    $(".n-pdf-body-container").css('margin-left', `calc(${pdfButtonWidth - pdfMenuWidth}px)`);
</script>
</div>

    

</div>




<div class="content-to-index">
<div class="paragraph lead">
<p>Installing the NFS Plug-in involves enabling VMware vStorage for NFS on the NetApp storage system, verifying that VAAI (VMware vStorage APIs for Array Integration) is enabled on the VMware host, downloading and installing the plug-in on the VMware ESXi host, and verifying that the installation is successful.</p>
</div>
<div class="ulist">
<div class="title">Before you begin</div>
<ul>
<li>
<p>NFSv3 or NFSv4.1 must be enabled on the storage system.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/nfs-plugin-vmware-vaai/images/note.svg" alt="Note">
</td>
<td class="content">
NFSv4.1 is available only on ONTAP 9.0 systems and NFSv3 is available on both 7-Mode and Cluster-Mode systems.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>VMware vSphere 7.0U1 must be available.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For additional information about enabling NFS and using VMware vSphere, see the manuals listed in <a href="#step10">Step 10</a>.</p>
</div>
<div class="ulist">
<div class="title">About this task</div>
<ul>
<li>
<p>If you are using the VMware ESXi CLI to install the plug-in, start with <a href="#step1">Step 1</a>.</p>
</li>
<li>
<p>If you are using Virtual Storage Console for VMware vSphere (VSC) to install the plug-in, start with <a href="#step3">Step 3</a>.</p>
<div class="paragraph">
<p>VSC enables VMware vStorage for NFS on the storage controller and enables VAAI on the ESXi host, which are steps <a href="#step1">1</a> through <a href="#step2">2</a> of this procedure.</p>
</div>
</li>
<li>
<p>If you are using ONTAP tools for VMware vSphere to install the plug-in, start with <a href="#step3">Step 3</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>IP address conventions used:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>IP addresses of the form 192.168.42.2xx refer to ESXi server VMkernel ports.</p>
</li>
<li>
<p>IP addresses of the form 192.168.42.6x refer to systems running Data ONTAP operating in 7-Mode.</p>
</li>
<li>
<p>IP addresses of the form 192.168.42.8x refer to storage virtual machines (SVMs, formerly known as Vservers) on ONTAP systems.</p>
</li>
</ul>
</div>
<div class="olist arabic">
<div class="title">Steps</div>
<ol class="arabic">
<li>
<p><a id="step1"></a>Enable VMware vStorage for NFS:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you use the&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ONTAP CLI</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable VMware vStorage for NFS on the SVM:
<code>vserver nfs modify –vserver vserver_name -vstorage enabled</code>
<code>&lt;vserver_name&gt;</code> is the name of the SVM.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>7-Mode CLI</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable VMware vStorage for NFS on the storage system:
<code>options nfs.vstorage.enable on</code></p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>7-Mode CLI for vFiler units</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Enable the installation of NetApp NFS plug-in vStorage for NFS on the MultiStore vFiler unit hosting VMware NFS datastores:
<code>vfiler run vfiler_name options nfs.vstorage.enable on</code></p>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step2"></a>Verify that VAAI is enabled on each ESXi host.</p>
<div class="paragraph">
<p>In VMware vSphere 5.0 and later, VAAI is enabled by default.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you use the&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>VMware ESXi CLI</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Verify that VAAI is enabled:
<code>esxcfg-advcfg -g /DataMover/HardwareAcceleratedMove</code>
<code>esxcfg-advcfg -g /DataMover/HardwareAcceleratedInit</code></p>
<div class="paragraph">
<p>If VAAI is enabled, these commands display the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~ #  esxcfg-advcfg -g /DataMover/HardwareAcceleratedMove
Value of HardwareAcceleratedMove is **1**
~ # esxcfg-advcfg -g /DataMover/HardwareAcceleratedInit
Value of HardwareAcceleratedInit is **1**</pre>
</div>
</div>
</li>
<li>
<p>If VAAI is not enabled, enable VAAI:
<code>esxcfg-advcfg -s 1 /DataMover/HardwareAcceleratedInit</code>
<code>esxcfg-advcfg -s 1 /DataMover/HardwareAcceleratedMove</code></p>
<div class="paragraph">
<p>These commands display the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~ # esxcfg-advcfg -s 1 /DataMover/HardwareAcceleratedInit
Value of HardwareAcceleratedInit is **1**
~ #  esxcfg-advcfg -s 1 /DataMover/HardwareAcceleratedMove
Value of HardwareAcceleratedMove is **1**</pre>
</div>
</div>
</li>
</ol>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>vSphere Client</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Log in to the vCenter Server.</p>
</li>
<li>
<p>For each ESXi server, click the server name.</p>
</li>
<li>
<p>In the Software section of the Configuration tab, click <strong>Advanced Settings</strong>.</p>
</li>
<li>
<p>Select <strong>DataMover</strong>, and then verify that the <code>DataMover.HardwareAcceleratedMove</code> and <code>DataMover.HardwareAcceleratedInit</code> parameters are set to 1.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p><a id="step3"></a>Download the NetApp NFS Plug-in for VMware VAAI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Go to the Download page at <a href="https://mysupport.netapp.com/site/products/all/details/nfsplugin-vmware-vaai/downloads-tab" target="_blank" rel="noopener">NetApp NFS Plug-in for VMware VAAI downloads</a>.</p>
</li>
<li>
<p>Download the latest software release for 2.0 and vSphere 7.0U1 and later.</p>
</li>
</ol>
</div>
</li>
<li>
<p>Verify the binary with the signed image and the public key:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Download the following zip to the <code>/tmp</code> folder:</p>
<div class="paragraph">
<p><code>NetAppNasPlugin-&lt;version&gt;.Signed.zip</code></p>
</div>
<div class="paragraph">
<p>This zip contains the following files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>NetAppNasPlugin-&lt;version&gt;.zip</code></p>
</li>
<li>
<p><code>NetAppNasPlugin-&lt;version&gt;.zip.sig</code></p>
</li>
<li>
<p><code>csc-prod-CFSG-NFS-Plugin.pem</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Obtain the public key from the certificate chain by using the following command:</p>
<div class="paragraph">
<p><code>openssl x509 -in csc-prod-CFSG-NFS-Plugin.pem -pubkey -noout &gt; csc-prod-CFSG-NFS-Plugin.pub</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>csc-prod-CFSG-NFS-Plugin.pem</code> is the certificate chain present in <code>NetAppNasPlugin-&lt;version&gt;.Signed.zip</code></p>
</li>
<li>
<p><code>csc-prod-CFSG-NFS-Plugin.pub</code> is a public key</p>
</li>
</ul>
</div>
</li>
<li>
<p>Verify the signed image with the public key:</p>
<div class="paragraph">
<p><code>openssl dgst -sha256 -verify csc-prod-CFSG-NFS-Plugin.pub -signature /tmp/ NetAppNasPlugin-&lt;version&gt;.zip.sig  /tmp/NetAppNasPlugin-&lt;version&gt;.zip</code></p>
</div>
<div class="paragraph">
<p>If verification is successful, the following output is displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Verified OK</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Install the plug-in on the ESXi host by running the following commands:</p>
<div class="paragraph">
<p><code>/etc/init.d/vaai-nasd stop</code></p>
</div>
<div class="paragraph">
<p><code>esxcli software component apply -d   /tmp/&lt;some_path&gt;/NetAppNasPlugin-&lt;version&gt;.zip</code></p>
</div>
<div class="paragraph">
<p><code>/etc/init.d/vaai-nasd start</code></p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;some_path&gt;</code> is the path to the location of the downloaded file</p>
</li>
<li>
<p><code>NetAppNasPlugin-&lt;version&gt;.zip</code> is contained in the downloaded zip</p>
</li>
</ul>
</div>
</li>
<li>
<p>Verify that the plug-in was successfully installed on the host at the VMware ESXi command line:</p>
<div class="paragraph">
<p><code>esxcli software component list</code></p>
</div>
<div class="paragraph">
<p>The plug-in works automatically following the installation and reboot.</p>
</div>
<div class="paragraph">
<p>Using these commands ensures that the component remains compatible with the new vLCM feature of vSphere, available from 7.0x and later.</p>
</div>
</li>
<li>
<p>If you are installing the plug-in on a new host system, or the server running ONTAP has been newly configured, either create or modify export policy rules for the root volumes and for each NFS datastore volume on the ESXi servers that use VAAI at <a href="task-configure-export-policies-for-clustered-data-ontap-to-allow-vaai-over-nfs.html">Configure export policies for ONTAP to allow VAAI over NFS</a>.</p>
<div class="paragraph">
<p>Skip this step if you are using Data ONTAP operating in 7-Mode.</p>
</div>
<div class="paragraph">
<p>You can use export policies to restrict access to volumes to specific clients. NFSv4 is required in the export policy for VAAI copy offloading to work, so you might need to modify the export policy rules for datastore volumes on SVMs. If you are using protocols other than NFS on a datastore, verify that setting NFS in the export rule does not remove those other protocols.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you use&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ONTAP CLI</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Set <code>nfs</code> as the access protocol for each export policy rule for ESXi servers that use VAAI:
<code>vserver export-policy rule modify -vserver vs1 -policyname mypolicy -ruleindex 1 -protocol nfs -rwrule krb5|krb5i|any -rorule krb5|krb5i|any</code></p>
</div>
<div class="paragraph">
<p>In the following example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>vs1</code> is the name of the SVM.</p>
</li>
<li>
<p><code>mypolicy</code> is the name of the export policy.</p>
</li>
<li>
<p><code>1</code> is the index number of the rule.</p>
</li>
<li>
<p><code>nfs</code> includes the NFSv3 and NFSv4 protocols.</p>
</li>
<li>
<p>The security style for RO (read-only) and RW (read-write) is either krb5, krb5i, or any.</p>
<div class="listingblock">
<div class="content">
<pre>cluster1::&gt; vserver export-policy rule modify -vserver vs1
-policyname mypolicy -ruleindex 1 -protocol nfs -rwrule krb5|krb5i|any -rorule krb5|krb5i|any</pre>
</div>
</div>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ONTAP System Manager</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the Home tab, double-click the appropriate cluster.</p>
</li>
<li>
<p>Expand the storage virtual machines (SVMs) hierarchy in the left navigation pane.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/nfs-plugin-vmware-vaai/images/note.svg" alt="Note">
</td>
<td class="content">
If you are using a version of System Manager prior to 3.1, the term Vservers is used instead of Storage Virtual Machines in the hierarchy.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>In the navigation pane, select the storage virtual machine (SVM) with VAAI-enabled datastores, and then click <strong>Policies</strong> &gt; <strong>Export Policies</strong>.</p>
</li>
<li>
<p>In the Export Policies window, expand the export policy, and then select the rule index.</p>
<div class="paragraph">
<p>The user interface does not specify that the datastore is VAAI enabled.</p>
</div>
</li>
<li>
<p>Click <strong>Modify Rule</strong> to display the Modify Export Rule dialog box.</p>
</li>
<li>
<p>Under <strong>Access Protocols</strong>, select <strong>NFS</strong> to enable all versions of NFS.</p>
</li>
<li>
<p>Click <strong>OK</strong>.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
</li>
<li>
<p>If you are using Data ONTAP operating in 7-Mode, execute the <code>exportfs</code> command for exporting volume paths.</p>
<div class="paragraph">
<p>Skip this step if you are using ONTAP.</p>
</div>
<div class="paragraph">
<p>For more information about the <code>exportfs</code> command, see the <a href="https://library.netapp.com/ecm/ecm_download_file/ECMP1401220" target="_blank" rel="noopener">Data ONTAP 8.2 File Access and Protocols Management Guide for 7-Mode</a>.</p>
</div>
<div class="paragraph">
<p>When exporting the volume, you can specify a host name or IP address, a subnet, or a netgroup. You can specify IP address, subnet, or hosts for both the <code>rw</code> and <code>root</code> options. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sys1&gt; exportfs -p root=192.168.42.227 /vol/VAAI</pre>
</div>
</div>
<div class="paragraph">
<p>You also can have a list, separated by colons. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sys1&gt; exportfs -p root=192.168.42.227:192.168.42.228 /vol/VAAI</pre>
</div>
</div>
<div class="paragraph">
<p>If you export the volume with the actual flag, the export path should have a single component for copy offload to work properly. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sys1&gt; exportfs -p actual=/vol/VAAI,root=192.168.42.227 /VAAI-ALIAS</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/nfs-plugin-vmware-vaai/images/note.svg" alt="Note">
</td>
<td class="content">
Copy offload does not work for multicomponent export paths.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Mount the NFSv3 or NFSv4.1 datastore on the ESXi host:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>To mount the NFSv3 datastore, execute the following command:</p>
<div class="paragraph">
<p><code>esxcli storage nfs add -H 192.168.42.80 -s share_name -v volume_name</code></p>
</div>
<div class="paragraph">
<p>To mount the NFSv4.1 datastore, execute the following command:</p>
</div>
<div class="paragraph">
<p><code>esxcli storage nfs41 add -H 192.168.42.80 -s share_name -v volume_name -a AUTH_SYS/SEC_KRB5/SEC_KRB5I</code></p>
</div>
<div class="paragraph">
<p>The following example shows the command to be run on ONTAP for mounting the datastore and the resulting output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~ # esxcfg-nas -a onc_src -o 192.168.42.80 -s /onc_src
Connecting to NAS volume: onc_src
/onc_src created and connected.</pre>
</div>
</div>
<div class="paragraph">
<p>For systems running Data ONTAP operating in 7-Mode, the <code>/vol</code> prefix precedes the NFS volume name. The following example shows the 7-Mode command for mounting the datastore and the resulting output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>~ # esxcfg-nas -a vms_7m -o 192.168.42.69 -s /vol/vms_7m
Connecting to NAS volume: /vol/vms_7m
/vol/vms_7m created and connected.</pre>
</div>
</div>
</li>
<li>
<p>To manage NAS mounts:</p>
<div class="paragraph">
<p><code>esxcfg-nas -l</code></p>
</div>
<div class="paragraph">
<p>The following output is displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>VMS_vol103 is /VMS_vol103 from 192.168.42.81 mounted available
VMS_vol104 is VMS_vol104 from 192.168.42.82 mounted available
dbench1 is /dbench1 from 192.168.42.83 mounted available
dbench2 is /dbench2 from 192.168.42.84 mounted available
onc_src is /onc_src from 192.168.42.80 mounted available</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Upon completion, the volume is mounted and available in the /vmfs/volumes directory.</p>
</div>
</li>
<li>
<p><a id="step10"></a>Verify that the mounted datastore supports VAAI by using one of the following methods:</p>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">If you use&#8230;&#8203;</th>
<th class="tableblock halign-left valign-top">Then&#8230;&#8203;</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>ESXi CLI</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>vmkfstools -Ph /vmfs/volumes/onc_src/</code>
The following output is displayed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>NFS-1.00 file system spanning 1 partitions.
File system label (if any):
onc_src Mode: public Capacity 760 MB, 36.0 MB available,
file block size 4 KB
UUID: fb9cccc8-320a99a6-0000-000000000000
Partitions spanned (on "notDCS"):

nfs:onc_src
NAS VAAI Supported: YES
Is Native Snapshot Capable: YES
~ #</pre>
</div>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>vSphere Client</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Click <strong>ESXi Server</strong> &gt; <strong>Configuration</strong> &gt; <strong>Storage</strong>.</p>
</li>
<li>
<p>View the Hardware Acceleration column for an NFS datastore with VAAI enabled.</p>
</li>
</ol>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>For more information about VMware vStorage over NFS, see the following:</p>
</div>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.cdot-famg-nfs/home.html" target="_blank" rel="noopener">ONTAP 9 NFS reference overview</a></p>
</div>
<div class="paragraph">
<p><a href="https://library.netapp.com/ecm/ecm_download_file/ECMP1401220" target="_blank" rel="noopener">Data ONTAP 8.2 File Access and Protocols Management Guide for 7-Mode</a></p>
</div>
<div class="paragraph">
<p>For details about configuring volumes and space in the volumes, see the following:</p>
</div>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-vsmg/home.html" target="_blank" rel="noopener">Logical storage management overview with the CLI</a></p>
</div>
<div class="paragraph">
<p><a href="https://library.netapp.com/ecm/ecm_download_file/ECMP1368859" target="_blank" rel="noopener">Data ONTAP 8.2 Storage Management Guide For 7-Mode</a></p>
</div>
<div class="paragraph">
<p>For more information about the VMware vSphere Lifecycle Manager, which can also be used to install and manage plugins on multiple hosts using the vCenter web client GUI, see the following:</p>
</div>
<div class="paragraph">
<p><a href="https://docs.vmware.com/en/VMware-vSphere/7.0/com.vmware.vsphere-lifecycle-manager.doc/GUID-74295A37-E8BB-4EB9-BFBA-47B78F0C570D.html" target="_blank" rel="noopener">About VMware vSphere Lifecycle Manager</a></p>
</div>
<div class="paragraph">
<p>For information about using VSC to provision NFS datastores and create clones of virtual machines in the VMware environment, see the following:</p>
</div>
<div class="paragraph">
<p><a href="https://library.netapp.com/ecmdocs/ECMLP2561116/html/index.html" target="_blank" rel="noopener">Virtual Storage Console 6.2.1 for VMware vSphere Installation and Administration Guide</a></p>
</div>
<div class="paragraph">
<p>For more information about using ONTAP tools for VMware vSphere to provision NFS datastores and create clones of virtual machines in the VMware environment, see the following:</p>
</div>
<div class="paragraph">
<p><a href="https://docs.netapp.com/vapp-98/topic/com.netapp.doc.vsc-dsg/home.html" target="_blank" rel="noopener">ONTAP tools for VMware vSphere Documentation</a></p>
</div>
<div class="paragraph">
<p>For more information about working with NFS datastores and performing cloning operations, see the following:</p>
</div>
<div class="paragraph">
<p><a href="http://pubs.vmware.com/vsphere-60/topic/com.vmware.ICbase/PDF/vsphere-esxi-vcenter-server-60-storage-guide.pdf" target="_blank" rel="noopener">VMware vSphere Storage</a></p>
</div>
</li>
<li>
<p>If you are using Data ONTAP operating in 7-Mode, execute the <code>sis on</code> command to enable the datastore volume for copy offloading and deduplication.</p>
<div class="paragraph">
<p>For ONTAP, view the efficiency details for a volume:</p>
</div>
<div class="paragraph">
<p><code>volume efficiency show -vserver vserver_name -volume volume_name</code></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<img src="/us-en/nfs-plugin-vmware-vaai/images/note.svg" alt="Note">
</td>
<td class="content">
For AFF (AFF) systems, volume efficiency is enabled by default.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>If the command output does not display any volumes with storage efficiency enabled, then enable efficiency:</p>
</div>
<div class="paragraph">
<p><code>volume efficiency on -vserver vserver_name -volume volume_name</code></p>
</div>
<div class="paragraph">
<p>Skip this step if you are using VSC or ONTAP tools for VMware vSphere to set up the volumes because volume efficiency is enabled on the datastores by default.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>sys1&gt; volume efficiency show
This table is currently empty.

sys1&gt; volume efficiency on -volume  testvol1
Efficiency for volume "testvol1" of Vserver "vs1" is enabled.

sys1&gt; volume efficiency show
Vserver    Volume           State    Status       Progress           Policy
---------- ---------------- -------- ------------ ------------------ ----------
vs1        testvol1         Enabled  Idle         Idle for 00:00:06  -</pre>
</div>
</div>
<div class="paragraph">
<p>For details about enabling deduplication on the datastore volumes, see the following:</p>
</div>
<div class="paragraph">
<p><a href="http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-vsmg/home.html" target="_blank" rel="noopener">Logical storage management overview with the CLI</a></p>
</div>
<div class="paragraph">
<p><a href="https://library.netapp.com/ecm/ecm_download_file/ECMP1401220" target="_blank" rel="noopener">Data ONTAP 8.2 File Access and Protocols Management Guide for 7-Mode</a></p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<div class="title">After you finish</div>
<p>Use the NFS plug-in space reservation and copy offload features to make routine tasks more efficient:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create virtual machines in the thick virtual machine disk (VMDK) format on NetApp traditional volumes or FlexVol volumes, and reserve space for the file when you create it.</p>
</li>
<li>
<p>Clone existing virtual machines within or across NetApp volumes:</p>
<div class="ulist">
<ul>
<li>
<p>Datastores that are volumes on the same SVM on the same node.</p>
</li>
<li>
<p>Datastores that are volumes on the same SVM on different nodes.</p>
</li>
<li>
<p>Datastores that are volumes on the same 7-Mode system or vFiler unit.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Perform cloning operations that finish faster than non-VAAI clone operations because they do not need to go through the ESXi host.</p>
</li>
</ul>
</div>
</div>




    </article>
    <!-- Page Container -->
  </div>

  
  <!-- Start Page Toolbar -->
<div id="ie-right-navbar-collapse" class="close">
  <img id="navbar-expand" class="ie-searchbox-icon" src="/us-en/nfs-plugin-vmware-vaai/images/double_arrow.svg" alt="" />
</div>
<div id="ie-right-navbar" class="open">
  <div id="right-navbar-collapse">
    <img src="/us-en/nfs-plugin-vmware-vaai/images/double_arrow.svg" alt="" />
  </div>
  <div class="page-nav-container">
    <nav class="page-nav-fixed">
      <div class="page-nav-title">On this page</div>
      <div class="page-nav-links">
        <ul class="page-nav-inner" id="page-menu"></ul>
      </div>
    </nav>
  </div>
</div>


<script>
  resizeContent();
  function setRightBarHeight() {
    var h = 0;

    // header 1
    h += PXinViewport($('.n-footer'));
    h += PXinViewport($('#ie-new-header'));

    if ($('#ie-right-navbar').length) {
      $('#ie-right-navbar').css({ height: `calc(100vh - ${h}px)` });
    }
    if ($('.page-nav-links').length) {
      h += 98;
      $('.page-nav-links').css({ height: `calc(100vh - ${h}px)` });
    }
  }

  $(document).ready(function () {
    // PAGE NAV - Click
    const MASTHEAD_OFFSET = 65;
    const SECTIONS = $("main h2, main h3");
    let calculateActiveSection = false;
    setTimeout(() => {
      calculateActiveSection = true;
    }, 100)

    $(".page-nav__link").click(function (event) {
      calculateActiveSection = false;
      $(".page-nav__link").removeClass('page-nav__link--active');
      var target = $(event.target);
      target.addClass('page-nav__link--active');
      location.hash = event.target.hash;
      setTimeout(() => {
        calculateActiveSection = true;
      }, 100)

    });

    // PAGE NAV - Scroll
    $(window).on('resize scroll', function () {
      if (calculateActiveSection) {
        var activeSection = getActiveSection(SECTIONS, MASTHEAD_OFFSET);
        if (activeSection) {
          var activeHref = $(activeSection).attr('id');
          $(".page-nav__link").removeClass('page-nav__link--active');
          $("#page-menu a[href=#" + activeHref + "]").addClass('page-nav__link--active');
          if (location.hash != "#" + activeHref) {
            if (history.replaceState) {
              history.replaceState(null, null, "#" + activeHref);
            }
          }
        }
      }
    });

    $(".n-pdf-button").click(function () {
      $(this).toggleClass("active");
    });

    $.fn.isVisibleAndInViewport = function () {
      var elementTop = $(this).offset().top;
      var elementBottom = elementTop + $(this).outerHeight();

      var viewportTop = $(window).scrollTop();
      var viewportBottom = viewportTop + $(window).height();

      return elementBottom > viewportTop && elementTop < viewportBottom && $(this).is(":visible");
    };


    $(window).on('resize scroll', function () {
      setRightBarHeight();
    });

    $(window).trigger('resize');


  });

  $("#right-navbar-collapse").click(function (e) {
    const rightNavbarWidth = $("#ie-right-navbar").width() - $("#ie-right-navbar-collapse").width();
    e.preventDefault();
    const width = $(".ie-content-pane").width();

    $("#ie-right-navbar").animate({ width: 'toggle' }, 350, function () {
      $("#ie-right-navbar-collapse").removeClass("close")
      $("#ie-right-navbar-collapse").addClass("open")
      $("#ie-right-navbar").removeClass("open")
      $("#ie-right-navbar").addClass("close")
    });
    $(".ie-content-pane").animate({ width: (width + rightNavbarWidth) }, 350, function () {
      resizeContent()
      setSidebarBottom();
    })

  });
  $("#navbar-expand").click(function (e) {
    const rightNavbarWidth = $("#ie-right-navbar").width() - $("#ie-right-navbar-collapse").width();
    e.preventDefault();
    const width = $(".ie-content-pane").width();
    $("#ie-right-navbar").animate({ width: 'toggle' }, 250, function () {
      $("#ie-right-navbar-collapse").removeClass("open")
      $("#ie-right-navbar-collapse").addClass("close")
      $("#ie-right-navbar").removeClass("close")
      $("#ie-right-navbar").addClass("open")
      setRightBarHeight();
      setSidebarBottom();
    });
    $(".ie-content-pane").animate({ width: (width - rightNavbarWidth) }, 250, function () {
      resizeContent()
    })
  });

  function navbarResize() {
    const rightNavbarResized = $("#ie-right-navbar-collapse").hasClass('resized');
    if (window.innerWidth < 1024) {
      $("#ie-right-navbar").removeClass("open")
      $("#ie-right-navbar").addClass("close")
      $("#ie-right-navbar").removeAttr("style")
      $("#ie-right-navbar-collapse").removeClass("close")
      $("#ie-right-navbar-collapse").addClass("open")
      $("#ie-right-navbar-collapse").addClass("resized")
    } else {
      if (rightNavbarResized) {
        $('#ie-right-navbar').removeClass('close');
        $('#ie-right-navbar').addClass('open');
        $("#ie-right-navbar-collapse").removeClass("resized")
        $("#ie-right-navbar-collapse").removeClass("open")
        $("#ie-right-navbar-collapse").addClass("close")
      }
    }
    resizeContent()
  }
  navbarResize();
  $(window).on('resize load', function () {
    navbarResize()
  });

  function getActiveSection(sections, offset) {
    var scrollPosition = $(window).scrollTop() + offset + 5;
    var activeSection;
    for (var i = 0; i < sections.length; i++) {
      var el = $(sections[i]);
      var activePosition = el.offset().top;
      if (activePosition > scrollPosition) {
        break;
      }

      activeSection = sections[i];
    }

    return activeSection;
  }

  $("a[href*=#]:not([href=#])").click(function () {
    setTimeout(() => {
      $(window).trigger('scroll');
    }, 105)
  })

  const hashOnLoad = location.href.split("#")[1];
  setTimeout(function () {
    if (hashOnLoad) {
      $(".page-nav__link").removeClass('page-nav__link--active');
      $("#page-menu a[href=#" + hashOnLoad + "]").addClass('page-nav__link--active');
    }
  }, 100)

</script>


  <div style="clear: both"></div><!-- Main needs to have height --></div>

        </main>

        <footer class="n-footer">
  <div class="n-footer__bottom">
    <div class="n-container">
        <div class="n-footer__left">
          <li class="n-footer__copyright-link">
                    <a href="https://www.netapp.com/company/legal/copyright/">© 2024 NetApp, Inc.</a>
          </li>
        </div>
        <div class="n-footer__center">
          <ul class="n-footer__copyright-list">
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/terms-of-use/">Terms of use</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/privacy-policy/">Privacy policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a href="https://www.netapp.com/company/legal/cookie-policy/">Cookie policy</a>
            </li>
            <li class="n-footer__copyright-link">
              <a class="ot-sdk-show-settings">Cookie settings</a>
            </li>
          </ul>
       </div>
        <div class="n-footer__right">
              <li class="n-footer__copyright-link">
                <a target="_self" href="javascript:netapp_mailto()">Send feedback about this page</a>
              </li>
        </div>
     </div>
  </div>
</footer>

      </div><!-- Elasticsearch JS -->
      <script type="text/javascript" src='/us-en/nfs-plugin-vmware-vaai/js/bundle.js'></script>

      <!-- Syntax Highlighting -->
      <script type="text/javascript" src='/us-en/nfs-plugin-vmware-vaai/js/prism.js'></script>
      <script type="text/javascript" src='/us-en/nfs-plugin-vmware-vaai/js/prism-curl.js'></script>
    </div>
    <script>
      document.body.offsetWidth=1903;
      cookieLaw = {}
      cookieLaw.euCountry = "US";
      cookieLaw.invoke = function(){return false;}
    </script>
    <script src='/us-en/nfs-plugin-vmware-vaai/js/ie-tabbed-blocks.js'></script>
    <script src='/us-en/nfs-plugin-vmware-vaai/js/ie-sidebar.js'></script>
  </body>

</html>
